{"version":3,"sources":["webpack:///webpack/bootstrap b80a3ac608f182f0409b","webpack:///./src/immybox.js","webpack:///./src/utils.js"],"names":[],"mappings":"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","file":"immybox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b80a3ac608f182f0409b\n **/","/*eslint no-console:0*/\nimport {addClass, removeClass, nodeOrParentMatchingSelector} from './utils';\n\nconst event_listeners = new Map();\n\nconst defaults = {\n  choices: [],\n  maxResults: 50,\n  showArrow: true,\n  openOnClick: true,\n  defaultSelectedValue: undefined,\n  scroll_behavior: 'smooth',\n  filterFn(query) {\n    let lower_query = query.toLowerCase();\n    return choice => choice.text.toLowerCase().indexOf(lower_query) >= 0;\n  },\n  formatChoice(query) {\n    if (query) {\n      let reg = new RegExp(query.replace(/[#-.]|[[-^]|[?|{}]/g, '\\\\$&'), 'gi');\n      return choice => choice.text.replace(reg, '<span class=\"highlight\">$&</span>');\n    } else\n      return choice => choice.text;\n  }\n};\n\nexport const all_objects = new Map();\n\nexport const plugin_name = 'immybox';\n\nfunction assignEvent(event_name, event_handler, node, listeners) {\n  listeners.has(node) || listeners.set(node, new Map());\n  listeners.get(node).set(event_name, event_handler);\n  node.addEventListener(event_name, event_handler);\n}\n\nfunction getEventListenerMap(plugin) {\n  let map = new Map();\n  event_listeners.set(plugin, map);\n  return map;\n}\n\nexport class ImmyBox {\n  constructor(element, options) {\n    addClass(element, plugin_name);\n    element.setAttribute('autocomplete', 'off');\n\n    let listeners = getEventListenerMap(this);\n\n    this.element = element;\n    this.options = Object.assign({}, ImmyBox.defaults, options);\n    this.choices = this.options.choices;\n    if (this.options.defaultSelectedValue != null)\n      this.choices = [\n        this.choices.find(({value}) => {\n          return value === this.options.defaultSelectedValue;\n        }), ...(\n          this.choices.filter(({value}) => {\n            return value !== this.options.defaultSelectedValue;\n          }))\n      ].filter(choice => choice);\n    this.indexed_choices = this.choices.map((choice, index) => ({index, choice}));\n    this.values  = this.choices.map(choice => choice.value);\n    this.selectedChoice = null;\n\n    if (this.options.showArrow)\n      addClass(this.element, `${plugin_name}_witharrow`);\n\n\n    this.selectChoiceByValue(this.element.value);\n\n    this.queryResultArea = document.createElement('div');\n    addClass(this.queryResultArea, `${plugin_name}_results`);\n    this.queryResultAreaVisible = false;\n\n    this._val = this.element.value;\n    this.oldQuery = this.element.value;\n\n    if (this.options.openOnClick)\n      assignEvent('click', this.openResults.bind(this), this.element, listeners);\n\n    assignEvent('click', event => {\n      let node = nodeOrParentMatchingSelector(event.target, `li.${plugin_name}_choice`);\n      if (node) {\n        let value = this.valueFromElement(node);\n        this.selectChoiceByValue(value);\n        this.hideResults();\n        this._val = this.element.value;\n        this.element.focus();\n      }\n    }, this.queryResultArea, listeners);\n\n    assignEvent('mouseenter', event => {\n      let node = nodeOrParentMatchingSelector(event.target, `li.${plugin_name}_choice`);\n      if (node) {\n        addClass(node, 'active');\n        [...this.queryResultArea.querySelectorAll(`li.${plugin_name}_choice.active`)]\n        .forEach(li => li !== node && removeClass(li, 'active'));\n      }\n    }, this.queryResultArea, listeners);\n\n    assignEvent('keyup', this.doQuery.bind(this), this.element, listeners);\n    assignEvent('change', this.doQuery.bind(this), this.element, listeners);\n    assignEvent('search', this.doQuery.bind(this), this.element, listeners);\n    assignEvent('keydown', this.doSelection.bind(this), this.element, listeners);\n\n    all_objects.set(this.element, this);\n  }\n\n  // on 'keyup', 'change', 'search'\n  // perform a query on the choices\n  doQuery() {\n    let query = this.element.value;\n    if (this._val !== query) {\n      this._val = query;\n      this.oldQuery = query;\n      if (query) {\n        this.insertFilteredChoiceElements(query);\n      } else {\n        this.hideResults();\n        this.selectChoiceByValue(null);\n      }\n    }\n  }\n\n  // on 'keydown'\n  // select the highlighted choice\n  doSelection(event) {\n    if (event.which === 27) { // escape key\n      this.display();\n      this.hideResults();\n    }\n    if (this.queryResultAreaVisible) {\n      switch (event.which) {\n      case 9: // tab\n        this.selectHighlightedChoice();\n        break;\n      case 13: // enter\n        event.preventDefault();\n        this.selectHighlightedChoice();\n        break;\n      case 38: // up\n        event.preventDefault();\n        this.highlightPreviousChoice();\n        this.scroll();\n        break;\n      case 40: // down\n        event.preventDefault();\n        this.highlightNextChoice();\n        this.scroll();\n        break;\n      }\n    } else {\n      switch (event.which) {\n      case 40: // down\n        event.preventDefault();\n        if (this.selectedChoice)\n          this.insertFilteredChoiceElements(this.oldQuery);\n        else\n          this.insertFilteredChoiceElements('');\n        break;\n      case 9: // tab\n        this.revert();\n        break;\n      }\n    }\n  }\n\n  // on 'click'\n  // show the results box\n  openResults(event) {\n    event.cancelBubble = true;\n    event.stopPropogation && event.stopPropogation();\n    this.revertOtherInstances();\n    if (this.selectedChoice)\n      this.insertFilteredChoiceElements(this.oldQuery);\n    else\n      this.insertFilteredChoiceElements('');\n  }\n\n  // revert or set to null after losing focus\n  revert() {\n    if (this.queryResultAreaVisible) {\n      this.display();\n      this.hideResults();\n    } else if (this.element.value === '') this.selectChoiceByValue(null);\n  }\n\n  // if visible, reposition the results area on window resize\n  reposition() {\n    this.queryResultAreaVisible && this.positionResultsArea();\n  }\n\n  insertFilteredChoiceElements(query) {\n    let filteredChoices;\n    if (query === '')\n      filteredChoices = this.indexed_choices;\n    else {\n      let filter = this.options.filterFn(query);\n      filteredChoices = this.indexed_choices.filter(({choice}, index) => filter(choice, index));\n    }\n    let truncatedChoices = filteredChoices.slice(0, this.options.maxResults);\n    if (this.defaultSelectedChoice) {\n      if (filteredChoices.indexOf(this.defaultSelectedChoice) >= 0) {\n        if (truncatedChoices.indexOf(this.defaultSelectedChoice) === -1) {\n          truncatedChoices.unshift(this.defaultSelectedChoice);\n          truncatedChoices.pop();\n        } else {\n          truncatedChoices = truncatedChoices.filter(c => c.choice.value !== this.defaultSelectedChoice.value);\n          truncatedChoices.unshift(this.defaultSelectedChoice);\n        }\n      }\n    }\n    let formatter = this.options.formatChoice(query);\n    let selected_one = false;\n    let list = document.createElement('ul');\n    let results = truncatedChoices.map(({choice, index}) => {\n      let li = document.createElement('li');\n      li.setAttribute('class', `${plugin_name}_choice`);\n      li.setAttribute('data-immybox-value-index', index);\n      li.innerHTML = formatter(choice);\n      if (this.selectedChoice && (index === this.selectedChoice.index)) {\n        selected_one = true;\n        addClass(li, 'active');\n      }\n      list.appendChild(li);\n      return li;\n    });\n    if (results.length) {\n      if (this.valueFromElement(results[0]) === this.options.defaultSelectedValue)\n        !selected_one && addClass(results[0], 'active');\n    } else {\n      list = document.createElement('p');\n      list.setAttribute('class', `${plugin_name}_noresults`);\n      list.textContent = 'no matches';\n    }\n    while (this.queryResultArea.lastChild)\n      this.queryResultArea.removeChild(this.queryResultArea.lastChild);\n    this.queryResultArea.appendChild(list);\n    this.showResults();\n  }\n\n  scroll() {\n    this.highlightedChoice && this.highlightedChoice.scrollIntoView({\n      behavior: this.options.scroll_behavior\n    });\n  }\n\n  positionResultsArea() {\n    let input_offset = this.element.getBoundingClientRect();\n    let input_height = this.element.clientHeight;\n    let input_width = this.element.clientWidth;\n    let results_height = this.queryResultArea.clientHeight;\n    let results_bottom = input_offset.top + input_height + results_height;\n    let window_bottom = window.clientHeight + window.scrollTop;\n\n    // set the dimmensions and position\n    this.queryResultArea.style.width = `${input_width}px`;\n    this.queryResultArea.style.left = `${input_offset.left}px`;\n\n    if (results_bottom > window_bottom)\n      this.queryResultArea.style.top = `${input_offset.top - results_height}px`;\n    else\n      this.queryResultArea.style.top = `${input_offset.top + input_height}px`;\n  }\n\n  get highlightedChoice() {\n    let choice = this.queryResultArea.querySelector(`li.${plugin_name}_choice.active`);\n    return choice || null;\n  }\n\n  highlightNextChoice() {\n    let highlighted_choice = this.highlightedChoice;\n    if (highlighted_choice) {\n      let next_choice = highlighted_choice.nextSibling;\n      if (next_choice) {\n        removeClass(highlighted_choice, 'active');\n        addClass(next_choice, 'active');\n      }\n    } else {\n      let choice = this.queryResultArea.querySelector(`li.${plugin_name}_choice`);\n      if (choice) addClass(choice, 'active');\n    }\n  }\n\n  highlightPreviousChoice() {\n    let highlighted_choice = this.highlightedChoice;\n    if (highlighted_choice) {\n      let prev_choice = highlighted_choice.previousSibling;\n      if (prev_choice) {\n        removeClass(highlighted_choice, 'active');\n        addClass(prev_choice, 'active');\n      }\n    } else {\n      let choice = this.queryResultArea.querySelector(`li.${plugin_name}_choice:last-child`);\n      if (choice) addClass(choice, 'active');\n    }\n  }\n\n  selectHighlightedChoice() {\n    let highlighted_choice = this.highlightedChoice;\n    if (highlighted_choice) {\n      this.selectChoiceByValue(this.valueFromElement(highlighted_choice));\n      this.hideResults();\n    } else this.revert();\n  }\n\n  // display the selected choice in the input box\n  display() {\n    this.element.value = this.selectedChoice && this.selectedChoice.choice.text || '';\n    typeof Event !== 'undefined' && this.element.dispatchEvent(new Event('input'));\n    this._val = this.element.value;\n  }\n\n  // select the first choice with matching value\n  // Note: values should be unique\n  selectChoiceByValue(val) {\n    let old_val = this.value;\n    this.selectedChoice = (val && this.indexed_choices.find(({choice}) => {\n      return choice.value == val;\n    }) || null);\n    let new_val = this.value;\n    new_val !== old_val && this.element.dispatchEvent(new CustomEvent('update', {\n      detail: new_val\n    }));\n    this.display();\n  }\n\n  revertOtherInstances() {\n    all_objects.forEach(plugin => plugin !== this && plugin.revert());\n  }\n\n  valueFromElement(element) {\n    let index = parseInt(element.getAttribute('data-immybox-value-index'));\n    return !Number.isNaN(index) ? this.values[index] : undefined;\n  }\n\n  // public methods\n\n  showResults() {\n    console.log('showing results', this.queryResultAreaVisible);\n    !this.queryResultAreaVisible && document.body.appendChild(this.queryResultArea);\n    this.queryResultAreaVisible = true;\n    this.scroll();\n    this.positionResultsArea();\n  }\n\n  hideResults() {\n    this.queryResultAreaVisible && document.body.removeChild(this.queryResultArea);\n    this.queryResultAreaVisible = false;\n  }\n\n  // return array of choices\n  getChoices() {\n    return this.choices;\n  }\n\n  setChoices(newChoices) {\n    this.choices = newChoices;\n    if (this.options.defaultSelectedValue != null)\n      this.choices = [\n        this.choices.find(({value}) => {\n          return value === this.options.defaultSelectedValue;\n        }), ...(\n          this.choices.filter(({value}) => {\n            return value !== this.options.defaultSelectedValue;\n          }))\n      ].filter(choice => choice);\n    this.indexed_choices = this.choices.map((choice, index) => ({choice, index}));\n    this.selectedChoice && this.selectChoiceByValue(this.selectedChoice.choice.value);\n    this.oldQuery = '';\n    return this.choices;\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setValue(value) {\n    this.value = value;\n  }\n\n  // get the value of the currently-selected choice\n  get value() {\n    return this.selectedChoice && this.selectedChoice.choice.value || null;\n  }\n\n  // set the value of the currently-selected choice\n  set value(new_value) {\n    if (this.value !== new_value) {\n      this.selectChoiceByValue(new_value);\n      this.oldQuery = '';\n    }\n    return this.value;\n  }\n\n  // destroy this instance of the plugin\n  destroy() {\n    // remove event listeners\n    for (let [node, events] of event_listeners.get(this))\n      for (let [event_name, handler] of events) {\n        node.removeEventListener(event_name, handler);\n      }\n\n    removeClass(this.element, plugin_name);\n    this.queryResultAreaVisible && document.body.removeChild(this.queryResultArea);\n    all_objects.delete(this.element);\n  }\n\n  static set defaults(new_defaults) {\n    Object.assign(defaults, new_defaults);\n  }\n  static get defaults() {\n    return defaults;\n  }\n  static get pluginMethods() {\n    return ['showResults', 'hideResults', 'getChoices', 'setChoices', 'getValue', 'setValue', 'destroy'];\n  }\n  static pluginForElement(element) {\n    return all_objects.get(element);\n  }\n  static repositionAll() {\n    window.requestAnimationFrame(() => {\n      all_objects.forEach(plugin => {\n        plugin.queryResultAreaVisible && plugin.reposition();\n      });\n    });\n  }\n  static revertAll() {\n    all_objects.forEach(plugin => plugin.revert());\n  }\n  static repositionWhenScrolling(container) {\n    // use one global scoll listener to reposition any result areas that are open\n    container.addEventListener('scroll', ImmyBox.repositionAll);\n  }\n}\n\n// use one global click event listener to close/revert ones that are open\ndocument.addEventListener('DOMContentLoaded', () => {\n  document.body.addEventListener('click', ImmyBox.revertAll);\n  // use one global resize listener to reposition any result areas that are open\n  window.addEventListener('resize', ImmyBox.repositionAll);\n\n});\n\nwindow.ImmyBox = ImmyBox;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/immybox.js\n **/","/*eslint no-console:0*/\n// Polyfills\nNumber.isNaN = Number.isNaN || function(value) {\n  return typeof value === 'number' && isNaN(value);\n};\nif (!Array.prototype.find) {\n  Array.prototype.find = function(predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\nif (!Array.prototype.includes) {\n  Array.prototype.includes = function(searchElement /*, fromIndex*/ ) {\n    'use strict';\n    var O = Object(this);\n    var len = parseInt(O.length) || 0;\n    if (len === 0) {\n      return false;\n    }\n    var n = parseInt(arguments[1]) || 0;\n    var k;\n    if (n >= 0) {\n      k = n;\n    } else {\n      k = len + n;\n      if (k < 0) {k = 0;}\n    }\n    var currentElement;\n    while (k < len) {\n      currentElement = O[k];\n      if (searchElement === currentElement ||\n         (searchElement !== searchElement && currentElement !== currentElement)) {\n        return true;\n      }\n      k++;\n    }\n    return false;\n  };\n}\n\n// Exported utility methods\nexport function assert(bool, message) {\n  if (!bool) throw new Error(message);\n}\n\nexport function hasClass(element, class_name) {\n  return !!element.className.match(new RegExp(`(\\\\s|^)${class_name}(\\\\s|$)`));\n}\nexport function addClass(element, class_name) {\n  if (!hasClass(element, class_name)) element.className += ` ${class_name}`;\n}\nexport function removeClass(element, class_name) {\n  if (hasClass(element, class_name)) {\n    var reg = new RegExp(`(\\\\s|^)${class_name}(\\\\s|$)`);\n    element.className = element.className.replace(reg, ' ');\n  }\n}\n\nfunction parentNodeMatchingSelector(element, selector) {\n  if (!element.parentNode || !element.parentNode.matches) return null;\n  if (element.parentNode.matches(selector)) return element.parentNode;\n  return parentNodeMatchingSelector(element.parentNode, selector);\n}\n\nexport function nodeOrParentMatchingSelector(element, selector) {\n  if (element.matches && element.matches(selector)) return element;\n  return parentNodeMatchingSelector(element, selector);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/"],"sourceRoot":""}